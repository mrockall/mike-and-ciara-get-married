<!DOCTYPE html>
<html>
  <head>
    <title><%= @page_title.present? ? "#{@page_title} - " : "" %>Ciara & Mike Get Married</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>

    <%= javascript_importmap_tags %>
  </head>

  <body class="font-serif">
    <nav class="flex flex-wrap px-2 pt-2">
      <%
        links = [{
          text: 'Home',
          url: '/'
        }, {
          text: "Details of the Day", 
          url: "/details-of-the-day"
        }, {
          text: "Where to Stay", 
          url: "/where-to-stay"
        }, {
          text: "RSVP", 
          url: "/rsvp"
        }]
      %>

      <% links.each do |link| %>
        <% classes = ["px-4", "mr-2", "py-2", "text-stone-700", "rounded-lg", "hover:bg-rose-100", "hover:text-rose-900"] %>
        <% classes << "bg-rose-100 text-rose-900" if request.path == link[:url] %>
        <%= link_to link[:text], link[:url], class: classes.join(" ") %>
      <% end %>
    </nav>

    <main>
      <%= yield %>
    </main>

    <footer class="p-4 bg-white md:px-6 md:py-8">
      <aside class="px-6">
        <%
          days_until = (Date.parse("1/4/2023") - Date.today).to_i
          days_between = (Date.parse("1/4/2023") - Date.parse("12/11/2021")).to_i
          percent = days_until >= 0 ? (1 - days_until.fdiv(days_between))*100 : 100
        %>
        <div class="flex justify-center items-center mb-1 font-medium text-stone-900 text-sm lg:text-lg">
          <% if days_until > 0 %>
          <span><%= days_until %> days to go</span>
          <% elsif days_until == 0 %>
          <span>It's today!</span>
          <% end %>
        </div>
        <div class="w-full bg-stone-200 rounded-full h-2 my-2">
          <div class="bg-rose-100 h-2 rounded-full" style="width: <%= percent %>%"></div>
        </div>
        <div class="flex justify-between items-center mb-1 font-medium text-stone-900 text-sm lg:text-lg">
          <span>ğŸ’ - 12/11/21</span>
          <span>ğŸ‘°â€â™€ï¸ğŸ¤µ - 1/4/23</span>
        </div>
      </aside>
      <hr class="my-6 border-gray-200 sm:mx-auto lg:my-8">
      <nav class="flex flex-wrap px-2 pt-2">
        <% links.each do |link| %>
          <% classes = ["px-4", "mr-2", "py-2", "text-stone-700", "rounded-lg", "hover:bg-rose-100", "hover:text-rose-900"] %>
          <% classes << "bg-rose-100 text-rose-900" if request.path == link[:url] %>
          <%= link_to link[:text], link[:url], class: classes.join(" ") %>
        <% end %>
      </nav>
      <hr class="my-6 border-gray-200 sm:mx-auto lg:my-8">
      <span class="block text-sm text-stone-500 sm:text-center">Built by Mike. All the code is available on <a href="https://github.com/mrockall/mike-and-ciara-get-married" class="underline font-medium">Github.</a>
      </span>
    </footer>
  </body>
</html>
